import{p as W,s as B}from"./productList-DQpiE5Oj.js";import{r as D,a as E,ay as X,o as g,b as y,d,c as o,e as s,u as l,F,B as Y,f as u,g as Z,t as b,h as G,az as L,_ as ee,j as te}from"./index-Ce41ocDD.js";import{F as oe,I as ae,_ as se}from"./index-CKAsUCrO.js";import{_ as ne,a as le}from"./index-BTMABiMH.js";import{S as de,_ as ie}from"./index-C-BF23Zx.js";import"./request-CDtsqYAV.js";const re={class:"box"},ue={class:"gutter-box"},pe={class:"gutter-box"},ce={class:"gutter-box"},_e={class:"gutter-box"},me={class:"list-btn"},ge={key:0},fe={key:1,class:"editable-row-operations"},ve=["onClick"],ye=["onClick"],he=["onClick"],be={class:"page"},ze={__name:"index",setup(ke){let h=D(!0),k=E({});const O=D(),$={span:5},V={span:13},T=[{title:"商品编码",dataIndex:"id"},{title:"商品名称",dataIndex:"name"},{title:"销售价格",dataIndex:"price"},{title:"运费",dataIndex:"freight"},{title:"库存",dataIndex:"inventory"},{title:"状态",dataIndex:"state"},{title:"编辑",dataIndex:"operation"}],f=D([]);let n=E({goodsCode:"",goodsName:"",goodsStatus:"",updateTimeStart:"",updateTimeEnd:"",goodsOriginId:"",upSort:"",downSort:"",current:1,pageSize:5,total:0}),c=()=>{W(n).then(e=>{let t=[],r=Number(e.data.total);e.data.records.forEach(v=>{const{id:p,goodsOriginId:C,goodsName:x,goodsPrice:_,goodsFreightPrice:I,inventoryCount:w,goodsStatus:N,goodsDescribe:z,goodsImg:P,goodsImgList:a,goodsSupplyPrice:U,operatorName:i,goodsOriginName:m}=v;t.push({id:p,name:x,key:p,price:_,freight:I,inventory:w,state:N,goodsDescribe:z,goodsImg:P,goodsImgList:a,goodsSupplyPrice:U,operatorName:i,goodsOriginName:m}),f.value=t}),n.total=r})};c();let q=(e,t)=>{n.current=e,n.pageSize=t,c()};const S=E({}),R=e=>{let t={id:e[0].id,goodsStatus:e[0].state==0?1:0,operatorName:""};B(t).then(r=>{c()})};let j=e=>{k.value=e,e.length?h.value=!1:h.value=!0};const Q=()=>{k.value.forEach(e=>{let t={id:e,goodsStatus:f.value.state==1?0:1,operatorName:""};B(t).then(r=>{c()})})},A=()=>{k.value.forEach(e=>{let t={id:e,goodsStatus:f.value.state==0?1:0,operatorName:""};B(t).then(r=>{c()})})},H={getCheckboxProps(e){return{name:e.id}}},J=e=>{L.push({path:"/commodity-list/commodity",query:{...e[0],origin_type:"see"}})},K=e=>{L.push({path:"/commodity-list/commodity?origin_type=edit",query:{...e[0],origin_type:"edit"}})},M=()=>{n.current=1,c()};return(e,t)=>{const r=ae,v=se,p=ee,C=de,x=ie,_=Y,I=te,w=oe,N=X("router-link"),z=ne,P=le;return g(),y(F,null,[d("div",re,[o(w,{ref_key:"formRef",ref:O,model:f.value,"label-col":$,"wrapper-col":V},{default:s(()=>[o(I,{gutter:[16]},{default:s(()=>[o(p,{class:"gutter-row",span:6},{default:s(()=>[d("div",ue,[o(v,{ref:"name",label:"商品编码",name:"goodsCode"},{default:s(()=>[o(r,{value:l(n).goodsCode,"onUpdate:value":t[0]||(t[0]=a=>l(n).goodsCode=a),placeholder:"请输入商品编码"},null,8,["value"])]),_:1},512)])]),_:1}),o(p,{class:"gutter-row",span:6},{default:s(()=>[d("div",pe,[o(v,{label:"商品名称"},{default:s(()=>[o(r,{value:l(n).goodsName,"onUpdate:value":t[1]||(t[1]=a=>l(n).goodsName=a),placeholder:"请输入商品名称"},null,8,["value"])]),_:1})])]),_:1}),o(p,{class:"gutter-row",span:6},{default:s(()=>[d("div",ce,[o(v,{label:"状态"},{default:s(()=>[o(x,{value:l(n).goodsStatus,"onUpdate:value":t[2]||(t[2]=a=>l(n).goodsStatus=a)},{default:s(()=>[o(C,{value:0},{default:s(()=>[u("上架")]),_:1}),o(C,{value:1},{default:s(()=>[u("下架")]),_:1})]),_:1},8,["value"])]),_:1})])]),_:1}),o(p,{class:"gutter-row",span:6},{default:s(()=>[d("div",_e,[o(_,{type:"primary",onClick:M},{default:s(()=>[u("查询")]),_:1})])]),_:1})]),_:1})]),_:1},8,["model"])]),d("div",null,[d("div",me,[o(_,{type:"primary"},{default:s(()=>[o(N,{to:"/commodity-list/commodity?origin_type=new"},{default:s(()=>[u(" 新建商品 ")]),_:1})]),_:1}),o(_,{disabled:l(h),type:"primary",class:"con",onClick:Q},{default:s(()=>[u("批量上架")]),_:1},8,["disabled"]),o(_,{disabled:l(h),type:"primary",onClick:A},{default:s(()=>[u("批量下架")]),_:1},8,["disabled"])]),o(z,{ref:"aaa","row-selection":{rowSelection:H,onChange:l(j)},columns:T,pagination:!1,"data-source":f.value,bordered:""},{bodyCell:s(({column:a,text:U,record:i})=>[["code","name","price","freight","inventory"].includes(a.dataIndex)?(g(),y("div",ge,[S[i.key]?(g(),Z(r,{key:0,value:S[i.key][a.dataIndex],"onUpdate:value":m=>S[i.key][a.dataIndex]=m,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):(g(),y(F,{key:1},[u(b(U),1)],64))])):a.dataIndex==="operation"?(g(),y("div",fe,[d("span",null,[d("a",{onClick:m=>J([i])},"查看",8,ve),d("a",{onClick:m=>R([i])},b(i.state==0?"上架":"下架"),9,ye),d("a",{onClick:m=>K([i])},b(i.state==0?"编辑":""),9,he)])])):G("",!0),a.dataIndex==="state"?(g(),y(F,{key:2},[u(b(i.state==1?"上架":"下架"),1)],64)):G("",!0)]),_:1},8,["row-selection","data-source"]),d("div",be,[o(P,{current:l(n).current,"onUpdate:current":t[3]||(t[3]=a=>l(n).current=a),"page-size":l(n).pageSize,"onUpdate:pageSize":t[4]||(t[4]=a=>l(n).pageSize=a),total:l(n).total,"show-total":a=>`共 ${a} 条`,onChange:l(q)},null,8,["current","page-size","total","show-total","onChange"])])])],64)}}};export{ze as default};
